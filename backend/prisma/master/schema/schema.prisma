generator client {
  provider = "prisma-client-js"
  output   = "../../../node_modules/@prisma/client-master"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL_A")
}

model Empresa {
  id        String    @id @default(uuid())
  nome      String
  slug      String    @unique
  realmName String    @unique
  email     String    @unique
  usuarios  Usuario[]

  ativo       Boolean   @default(true)
  criadoEm    DateTime  @default(now())
  criadoPor   String?
  editadoEm   DateTime  @updatedAt
  editadoPor  String?
  deletadoEm  DateTime?
  deletadoPor String?
}

model Usuario {
  id        String       @id @default(uuid())
  nome      String
  sobrenome String?
  email     String       @unique
  cargo     CargoUsuario @default(FUNCIONARIO)
  empresaId String
  empresa   Empresa      @relation(fields: [empresaId], references: [id])

  ativo       Boolean   @default(true)
  criadoEm    DateTime  @default(now())
  criadoPor   String?
  editadoEm   DateTime  @updatedAt
  editadoPor  String?
  deletadoEm  DateTime?
  deletadoPor String?
}

enum CargoUsuario {
  ADMIN
  FUNCIONARIO
}
